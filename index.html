<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Eicher Motors — Equity Research Dashboard</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:    #0D1B2A;
    --navy2:   #1A2E45;
    --navy3:   #243B55;
    --gold:    #C9A84C;
    --gold2:   #E8C97A;
    --cream:   #F5EFE0;
    --cream2:  #EDE5D0;
    --red:     #C0392B;
    --green:   #1E8449;
    --text:    #F0EAD6;
    --muted:   #8B9BB4;
    --border:  rgba(201,168,76,0.2);
    --card-bg: rgba(26,46,69,0.7);
    --glass:   rgba(13,27,42,0.85);
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  html { scroll-behavior: smooth; }

  body {
    background: var(--navy);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-weight: 300;
    overflow-x: hidden;
    cursor: default;
  }

  /* ── BACKGROUND TEXTURE ── */
  body::before {
    content: '';
    position: fixed; inset: 0; z-index: 0;
    background:
      radial-gradient(ellipse 80% 60% at 20% 10%, rgba(201,168,76,0.06) 0%, transparent 60%),
      radial-gradient(ellipse 60% 80% at 80% 90%, rgba(13,27,42,0.9) 0%, transparent 70%),
      repeating-linear-gradient(0deg, transparent, transparent 60px, rgba(201,168,76,0.015) 60px, rgba(201,168,76,0.015) 61px),
      repeating-linear-gradient(90deg, transparent, transparent 60px, rgba(201,168,76,0.015) 60px, rgba(201,168,76,0.015) 61px);
    pointer-events: none;
  }

  /* ── NAV ── */
  nav {
    position: sticky; top: 0; z-index: 100;
    background: var(--glass);
    border-bottom: 1px solid var(--border);
    backdrop-filter: blur(20px);
    padding: 0 3rem;
    display: flex; align-items: center; justify-content: space-between;
    height: 64px;
  }

  .nav-brand {
    display: flex; align-items: center; gap: 12px;
  }

  .nav-logo {
    width: 36px; height: 36px;
    border: 1.5px solid var(--gold);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Playfair Display', serif;
    font-size: 14px; font-weight: 700;
    color: var(--gold);
  }

  .nav-title {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px; font-weight: 500;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--cream);
  }

  .nav-links {
    display: flex; gap: 0;
    list-style: none;
  }

  .nav-links a {
    display: block;
    padding: 0 18px;
    height: 64px;
    line-height: 64px;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    text-decoration: none;
    transition: color 0.2s, border-bottom 0.2s;
    border-bottom: 2px solid transparent;
  }

  .nav-links a:hover,
  .nav-links a.active {
    color: var(--gold);
    border-bottom-color: var(--gold);
  }

  .nav-badge {
    font-size: 11px;
    background: rgba(201,168,76,0.15);
    border: 1px solid var(--border);
    color: var(--gold2);
    padding: 3px 10px;
    border-radius: 20px;
    letter-spacing: 0.05em;
  }

  /* ── MAIN LAYOUT ── */
  main {
    position: relative; z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 3rem 6rem;
  }

  /* ── HERO ── */
  .hero {
    padding: 5rem 0 4rem;
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: end;
    border-bottom: 1px solid var(--border);
    margin-bottom: 4rem;
  }

  .hero-eyebrow {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 1.2rem;
    display: flex; align-items: center; gap: 12px;
  }

  .hero-eyebrow::before {
    content: '';
    display: inline-block;
    width: 32px; height: 1px;
    background: var(--gold);
  }

  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(3rem, 6vw, 5.5rem);
    font-weight: 900;
    line-height: 0.95;
    letter-spacing: -0.02em;
    color: var(--cream);
    margin-bottom: 1rem;
  }

  .hero h1 em {
    font-style: italic;
    color: var(--gold);
  }

  .hero-sub {
    font-size: 15px;
    color: var(--muted);
    max-width: 480px;
    line-height: 1.7;
    margin-bottom: 2.5rem;
  }

  .hero-meta {
    display: flex; gap: 2rem;
  }

  .hero-meta-item {
    display: flex; flex-direction: column; gap: 4px;
  }

  .hero-meta-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .hero-meta-value {
    font-size: 13px;
    font-weight: 500;
    color: var(--cream2);
  }

  .hero-right {
    text-align: right;
    padding-bottom: 0.5rem;
  }

  .hero-ticker {
    font-family: 'Playfair Display', serif;
    font-size: 4rem;
    font-weight: 700;
    color: var(--navy3);
    -webkit-text-stroke: 1px var(--border);
    letter-spacing: -0.02em;
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .rating-badge {
    display: inline-flex; align-items: center; gap: 8px;
    background: rgba(30,132,73,0.15);
    border: 1px solid rgba(30,132,73,0.4);
    color: #58D68D;
    padding: 8px 18px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .rating-badge::before {
    content: '▲';
    font-size: 9px;
  }

  /* ── KPI STRIP ── */
  .kpi-strip {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 1px;
    background: var(--border);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 4rem;
  }

  .kpi-card {
    background: var(--card-bg);
    padding: 1.8rem 1.5rem;
    position: relative;
    transition: background 0.3s;
    cursor: default;
  }

  .kpi-card::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 2px;
    background: var(--gold);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.35s ease;
  }

  .kpi-card:hover { background: rgba(26,46,69,0.95); }
  .kpi-card:hover::after { transform: scaleX(1); }

  .kpi-label {
    font-family: 'DM Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 0.8rem;
  }

  .kpi-value {
    font-family: 'Playfair Display', serif;
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--gold2);
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .kpi-delta {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--muted);
  }

  .kpi-delta.pos { color: #58D68D; }
  .kpi-delta.neg { color: #EC7063; }

  /* ── SECTION HEADERS ── */
  .section {
    margin-bottom: 4rem;
    scroll-margin-top: 80px;
  }

  .section-header {
    display: flex; align-items: baseline; justify-content: space-between;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--cream);
    display: flex; align-items: center; gap: 14px;
  }

  .section-num {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    color: var(--gold);
    letter-spacing: 0.1em;
  }

  .section-sub {
    font-size: 12px;
    color: var(--muted);
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.08em;
  }

  /* ── CHART CARDS ── */
  .chart-grid {
    display: grid;
    gap: 1.5rem;
  }

  .chart-grid.cols-2 { grid-template-columns: 1fr 1fr; }
  .chart-grid.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
  .chart-grid.cols-1-2 { grid-template-columns: 1fr 2fr; }
  .chart-grid.cols-2-1 { grid-template-columns: 2fr 1fr; }

  .chart-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 2rem;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .chart-card:hover {
    border-color: rgba(201,168,76,0.4);
    box-shadow: 0 0 40px rgba(201,168,76,0.05);
  }

  .chart-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .chart-card:hover::before { opacity: 1; }

  .card-title {
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 1.5rem;
    display: flex; align-items: center; gap: 8px;
  }

  .card-title span {
    width: 6px; height: 6px;
    background: var(--gold);
    border-radius: 50%;
    display: inline-block;
  }

  .chart-wrap {
    position: relative;
    height: 280px;
  }

  .chart-wrap.tall { height: 360px; }
  .chart-wrap.short { height: 200px; }

  /* ── DATA TABLE ── */
  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  .data-table th {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--muted);
    padding: 10px 16px;
    text-align: right;
    border-bottom: 1px solid var(--border);
    white-space: nowrap;
  }

  .data-table th:first-child { text-align: left; }

  .data-table td {
    padding: 12px 16px;
    text-align: right;
    border-bottom: 1px solid rgba(201,168,76,0.06);
    color: var(--cream2);
    font-variant-numeric: tabular-nums;
    transition: background 0.15s;
  }

  .data-table td:first-child {
    text-align: left;
    font-weight: 500;
    color: var(--text);
  }

  .data-table tr:hover td { background: rgba(201,168,76,0.04); }

  .data-table tr.highlight td {
    background: rgba(201,168,76,0.07);
    color: var(--gold2);
    font-weight: 600;
  }

  .badge-pos {
    display: inline-block;
    background: rgba(30,132,73,0.15);
    color: #58D68D;
    padding: 2px 8px; border-radius: 3px;
    font-size: 11px; font-weight: 600;
  }

  .badge-neg {
    display: inline-block;
    background: rgba(192,57,43,0.15);
    color: #EC7063;
    padding: 2px 8px; border-radius: 3px;
    font-size: 11px; font-weight: 600;
  }

  /* ── FORMULA BLOCK ── */
  .formula-block {
    background: rgba(13,27,42,0.9);
    border: 1px solid var(--border);
    border-left: 3px solid var(--gold);
    border-radius: 4px;
    padding: 1.5rem 1.8rem;
    margin: 1.5rem 0;
    font-family: 'DM Mono', monospace;
    font-size: 12.5px;
    line-height: 1.9;
    color: var(--cream2);
  }

  .formula-block .f-comment { color: var(--muted); }
  .formula-block .f-key    { color: var(--gold2); font-weight: 500; }
  .formula-block .f-val    { color: #82E0AA; }
  .formula-block .f-result { color: var(--gold); font-weight: 700; font-size: 14px; }

  /* ── TABS ── */
  .tab-group {
    display: flex; gap: 0;
    border-bottom: 1px solid var(--border);
    margin-bottom: 2rem;
  }

  .tab-btn {
    background: none; border: none;
    padding: 12px 22px;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px; font-weight: 500;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--muted);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: color 0.2s, border-color 0.2s;
  }

  .tab-btn.active { color: var(--gold); border-bottom-color: var(--gold); }
  .tab-btn:hover:not(.active) { color: var(--cream2); }

  .tab-pane { display: none; }
  .tab-pane.active { display: block; }

  /* ── PEER COMPARISON ── */
  .peer-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .peer-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.8rem;
    transition: transform 0.2s, border-color 0.2s;
  }

  .peer-card:hover { transform: translateY(-2px); border-color: rgba(201,168,76,0.4); }

  .peer-card.featured {
    border-color: var(--gold);
    background: rgba(201,168,76,0.05);
  }

  .peer-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--cream);
    margin-bottom: 4px;
  }

  .peer-tag {
    font-size: 11px;
    color: var(--muted);
    margin-bottom: 1.5rem;
    font-family: 'DM Mono', monospace;
  }

  .peer-stat {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid rgba(201,168,76,0.07);
    font-size: 13px;
  }

  .peer-stat:last-child { border-bottom: none; }
  .peer-stat-label { color: var(--muted); }
  .peer-stat-value { font-weight: 600; color: var(--cream2); font-variant-numeric: tabular-nums; }
  .peer-stat-value.best { color: #58D68D; }

  /* ── GGM CALCULATOR ── */
  .ggm-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }

  .input-group {
    margin-bottom: 1.4rem;
  }

  .input-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 8px;
    display: flex; justify-content: space-between;
  }

  .input-label span { color: var(--gold2); font-size: 11px; }

  input[type=range] {
    -webkit-appearance: none;
    width: 100%; height: 3px;
    background: rgba(201,168,76,0.2);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
    margin-bottom: 4px;
  }

  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px; height: 14px;
    background: var(--gold);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 8px rgba(201,168,76,0.5);
    transition: transform 0.15s;
  }

  input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.3); }

  .result-display {
    background: rgba(13,27,42,0.9);
    border: 1px solid var(--gold);
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
  }

  .result-label {
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 1rem;
  }

  .result-value {
    font-family: 'Playfair Display', serif;
    font-size: 3.5rem;
    font-weight: 900;
    color: var(--gold);
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .result-premium {
    font-size: 13px;
    color: var(--muted);
    margin-bottom: 1.5rem;
  }

  .result-premium b { color: var(--cream2); }

  .result-bar-wrap {
    background: rgba(201,168,76,0.1);
    border-radius: 2px;
    height: 6px;
    overflow: hidden;
    margin-bottom: 8px;
  }

  .result-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold2));
    border-radius: 2px;
    transition: width 0.5s ease;
  }

  .result-bar-labels {
    display: flex; justify-content: space-between;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    color: var(--muted);
  }

  /* ── CAPITAL STRUCTURE VIZ ── */
  .cs-timeline {
    display: flex; align-items: flex-end;
    gap: 1rem; height: 160px;
    padding-top: 1rem;
    margin-bottom: 0.5rem;
  }

  .cs-year-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 6px; }
  .cs-bar-wrap { flex: 1; display: flex; flex-direction: column; justify-content: flex-end; width: 100%; }
  .cs-bar { width: 100%; border-radius: 2px 2px 0 0; transition: height 0.5s ease; }
  .cs-year-label { font-family: 'DM Mono', monospace; font-size: 10px; color: var(--muted); }

  /* ── SCROLLBAR ── */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--navy); }
  ::-webkit-scrollbar-thumb { background: var(--navy3); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--gold); }

  /* ── FOOTER ── */
  footer {
    position: relative; z-index: 1;
    border-top: 1px solid var(--border);
    padding: 3rem;
    display: flex; justify-content: space-between; align-items: center;
    max-width: 1400px; margin: 0 auto;
    color: var(--muted);
    font-size: 12px;
  }

  /* ── ANIMATIONS ── */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .fade-up {
    opacity: 0;
    animation: fadeUp 0.6s ease forwards;
  }

  .fade-up:nth-child(1) { animation-delay: 0.05s; }
  .fade-up:nth-child(2) { animation-delay: 0.12s; }
  .fade-up:nth-child(3) { animation-delay: 0.19s; }
  .fade-up:nth-child(4) { animation-delay: 0.26s; }
  .fade-up:nth-child(5) { animation-delay: 0.33s; }

  @keyframes pulse-gold {
    0%, 100% { box-shadow: 0 0 0 0 rgba(201,168,76,0); }
    50% { box-shadow: 0 0 0 8px rgba(201,168,76,0.1); }
  }

  .pulse { animation: pulse-gold 3s infinite; }

  /* ── TOOLTIP ── */
  .tooltip-note {
    font-size: 11px;
    color: var(--muted);
    font-style: italic;
    margin-top: 1rem;
    font-family: 'DM Mono', monospace;
  }

  @media (max-width: 900px) {
    nav { padding: 0 1.5rem; }
    nav .nav-links { display: none; }
    main { padding: 0 1.5rem 4rem; }
    .hero { grid-template-columns: 1fr; }
    .hero-right { display: none; }
    .kpi-strip { grid-template-columns: repeat(2, 1fr); }
    .chart-grid.cols-2, .chart-grid.cols-3,
    .chart-grid.cols-1-2, .chart-grid.cols-2-1 { grid-template-columns: 1fr; }
    .peer-grid { grid-template-columns: 1fr; }
    .ggm-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-brand">
    <div class="nav-logo">EM</div>
    <span class="nav-title">Eicher Motors &nbsp;·&nbsp; Research</span>
  </div>
  <ul class="nav-links">
    <a href="#overview"   class="active">Overview</a>
    <a href="#capital">Capital</a>
    <a href="#wacc">WACC</a>
    <a href="#profitability">Margins</a>
    <a href="#dividends">Dividends</a>
    <a href="#peers">Peers</a>
  </ul>
  <span class="nav-badge">FY2024 · NSE: EICHERMOT</span>
</nav>

<main>

  <!-- HERO -->
  <section class="hero fade-up" id="overview">
    <div>
      <div class="hero-eyebrow">Senior Equity Research · February 2026</div>
      <h1>Eicher<br><em>Motors</em></h1>
      <p class="hero-sub">A longitudinal financial analysis spanning capital structure evolution, WACC computation, margin trajectory, and intrinsic value estimation via Gordon Growth Model.</p>
      <div class="hero-meta">
        <div class="hero-meta-item">
          <span class="hero-meta-label">Exchange</span>
          <span class="hero-meta-value">NSE / BSE</span>
        </div>
        <div class="hero-meta-item">
          <span class="hero-meta-label">Sector</span>
          <span class="hero-meta-value">Auto OEM — Premium</span>
        </div>
        <div class="hero-meta-item">
          <span class="hero-meta-label">Report Period</span>
          <span class="hero-meta-value">FY2019 – FY2024</span>
        </div>
        <div class="hero-meta-item">
          <span class="hero-meta-label">Data Source</span>
          <span class="hero-meta-value">Annual Reports</span>
        </div>
      </div>
    </div>
    <div class="hero-right">
      <div class="hero-ticker">EML</div>
      <div class="rating-badge">Strong Buy</div>
    </div>
  </section>

  <!-- KPI STRIP -->
  <div class="kpi-strip">
    <div class="kpi-card fade-up pulse">
      <div class="kpi-label">WACC (FY2024)</div>
      <div class="kpi-value">11.6<span style="font-size:1.2rem">%</span></div>
      <div class="kpi-delta">Ke = 11.62% · Kd = 7.5%</div>
    </div>
    <div class="kpi-card fade-up">
      <div class="kpi-label">ROCE</div>
      <div class="kpi-value">38.2<span style="font-size:1.2rem">%</span></div>
      <div class="kpi-delta pos">+26.6pp EVA Spread vs WACC</div>
    </div>
    <div class="kpi-card fade-up">
      <div class="kpi-label">EBITDA Margin</div>
      <div class="kpi-value">26.0<span style="font-size:1.2rem">%</span></div>
      <div class="kpi-delta pos">+1,120 bps vs Hero MotoCorp</div>
    </div>
    <div class="kpi-card fade-up">
      <div class="kpi-label">GGM Value</div>
      <div class="kpi-value">₹3,506</div>
      <div class="kpi-delta neg">Mkt ~₹4,800 · +37% premium</div>
    </div>
    <div class="kpi-card fade-up">
      <div class="kpi-label">Net Cash (FY24)</div>
      <div class="kpi-value">₹5,800<span style="font-size:1rem">Cr</span></div>
      <div class="kpi-delta pos">D/E = 0.08x · Zero leverage</div>
    </div>
  </div>

  <!-- ── 1. CAPITAL STRUCTURE ── -->
  <section class="section" id="capital">
    <div class="section-header">
      <div class="section-title">
        <span class="section-num">01</span> Capital Structure
      </div>
      <span class="section-sub">FY2019 – FY2024 · Consolidated · INR Crore</span>
    </div>

    <div class="chart-grid cols-2-1">
      <div class="chart-card">
        <div class="card-title"><span></span> Debt vs. Equity Composition</div>
        <div class="chart-wrap">
          <canvas id="capitalChart"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="card-title"><span></span> Net Cash Position</div>
        <div class="chart-wrap">
          <canvas id="netCashChart"></canvas>
        </div>
      </div>
    </div>

    <div class="chart-card" style="margin-top:1.5rem">
      <div class="card-title"><span></span> Capital Structure Data Table</div>
      <table class="data-table">
        <thead>
          <tr>
            <th>Metric</th>
            <th>FY2019</th><th>FY2020</th><th>FY2021</th>
            <th>FY2022</th><th>FY2023</th><th>FY2024</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Total Debt (₹ Cr)</td><td>1,420</td><td>1,290</td><td>1,180</td><td>1,350</td><td>1,380</td><td>1,350</td></tr>
          <tr><td>Total Equity (₹ Cr)</td><td>8,240</td><td>9,150</td><td>10,200</td><td>12,400</td><td>14,800</td><td>17,600</td></tr>
          <tr><td>Debt / Equity</td><td>0.17x</td><td>0.14x</td><td>0.12x</td><td>0.11x</td><td>0.09x</td><td>0.08x</td></tr>
          <tr class="highlight"><td>Net Cash / (Debt) ₹ Cr</td><td>+820</td><td>+1,240</td><td>+2,600</td><td>+3,800</td><td>+4,900</td><td>+5,800</td></tr>
          <tr><td>Interest Coverage (x)</td><td>28.4x</td><td>24.7x</td><td>31.2x</td><td>42.5x</td><td>67.3x</td><td>89.1x</td></tr>
        </tbody>
      </table>
      <p class="tooltip-note">Source: Eicher Motors Annual Reports FY2019–FY2024. All figures on a consolidated basis.</p>
    </div>
  </section>

  <!-- ── 2. WACC / CAPM ── -->
  <section class="section" id="wacc">
    <div class="section-header">
      <div class="section-title"><span class="section-num">02</span> WACC &amp; CAPM</div>
      <span class="section-sub">Cost of Capital Computation</span>
    </div>

    <div class="chart-grid cols-2">
      <div class="chart-card">
        <div class="card-title"><span></span> CAPM Formula Derivation</div>
        <div class="formula-block">
<span class="f-comment">// Capital Asset Pricing Model</span>
<span class="f-key">Ke</span>  =  Rf  +  β × (Rm − Rf)

<span class="f-comment">// Inputs (January 2026)</span>
<span class="f-key">Rf</span>  =  <span class="f-val">6.80%</span>   <span class="f-comment">// 10-Yr GOI Bond Yield (RBI)</span>
<span class="f-key">β</span>   =  <span class="f-val">0.72</span>    <span class="f-comment">// 2-Yr Weekly Beta vs NIFTY 50</span>
<span class="f-key">Rm</span>  =  <span class="f-val">13.50%</span>  <span class="f-comment">// Nifty 50 long-run CAGR</span>
<span class="f-key">ERP</span> =  <span class="f-val">6.70%</span>   <span class="f-comment">// = Rm − Rf</span>

<span class="f-comment">// Computation</span>
Ke  =  6.80% + 0.72 × 6.70%
Ke  =  6.80% + 4.82%
<span class="f-result">Ke  ≈  11.62%</span>
        </div>
        <div class="formula-block">
<span class="f-comment">// WACC Computation</span>
<span class="f-key">WACC</span> = [E/(E+D)] × Ke + [D/(E+D)] × Kd × (1−T)

<span class="f-key">E/(E+D)</span>  =  <span class="f-val">98.97%</span>  <span class="f-comment">// Market cap basis</span>
<span class="f-key">D/(E+D)</span>  =  <span class="f-val">1.03%</span>   <span class="f-comment">// Book debt proxy</span>
<span class="f-key">Kd</span>       =  <span class="f-val">7.50%</span>   <span class="f-comment">// VECV borrowing rate</span>
<span class="f-key">Tax</span>      =  <span class="f-val">25.17%</span>  <span class="f-comment">// Effective corp. tax</span>

WACC = 0.9897 × 11.62% + 0.0103 × 7.50% × 0.7483
<span class="f-result">WACC ≈  11.56%</span>

<span class="f-comment">// EVA Spread</span>
ROCE − WACC = 38.2% − 11.6% = <span class="f-result">+26.6pp  ✓ VALUE CREATION</span>
        </div>
      </div>

      <div class="chart-card">
        <div class="card-title"><span></span> WACC Component Breakdown</div>
        <div class="chart-wrap short">
          <canvas id="waccBreakdown"></canvas>
        </div>
        <div class="card-title" style="margin-top:1.5rem"><span></span> ROCE vs. WACC — Economic Value Added</div>
        <div class="chart-wrap short">
          <canvas id="evaChart"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- ── 3. PROFITABILITY ── -->
  <section class="section" id="profitability">
    <div class="section-header">
      <div class="section-title"><span class="section-num">03</span> Profitability</div>
      <span class="section-sub">EBITDA · ROE · ROCE · DuPont</span>
    </div>

    <div class="tab-group" id="profTabs">
      <button class="tab-btn active" data-tab="margins">Margin Trends</button>
      <button class="tab-btn" data-tab="returns">Return Metrics</button>
      <button class="tab-btn" data-tab="dupont">DuPont Analysis</button>
      <button class="tab-btn" data-tab="revenue">Revenue &amp; PAT</button>
    </div>

    <div class="tab-pane active" id="tab-margins">
      <div class="chart-grid cols-1">
        <div class="chart-card">
          <div class="card-title"><span></span> EBITDA &amp; PAT Margin Trend (%)</div>
          <div class="chart-wrap tall">
            <canvas id="marginChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane" id="tab-returns">
      <div class="chart-grid cols-1">
        <div class="chart-card">
          <div class="card-title"><span></span> ROE vs. ROCE vs. WACC (%)</div>
          <div class="chart-wrap tall">
            <canvas id="returnsChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane" id="tab-dupont">
      <div class="chart-grid cols-2">
        <div class="chart-card">
          <div class="card-title"><span></span> DuPont Decomposition — FY2024</div>
          <div class="formula-block">
<span class="f-comment">// Three-Stage DuPont ROE Decomposition</span>
<span class="f-key">ROE</span> = Net Margin × Asset Turnover × Equity Multiplier

<span class="f-key">Net Profit Margin</span>  = PAT/Revenue  = <span class="f-val">4,001/17,255  = 23.2%</span>
<span class="f-key">Asset Turnover</span>     = Rev/Assets   = <span class="f-val">17,255/22,400 = 0.77x</span>
<span class="f-key">Equity Multiplier</span>  = Assets/Eq    = <span class="f-val">22,400/17,600 = 1.27x</span>

ROE = 23.2% × 0.77x × 1.27x
<span class="f-result">ROE ≈ 22.7%</span>

<span class="f-comment">// Insight: ROE driven by high margins,</span>
<span class="f-comment">// NOT leverage — hallmark of a quality franchise.</span>
          </div>
          <div class="chart-wrap short">
            <canvas id="dupontChart"></canvas>
          </div>
        </div>
        <div class="chart-card">
          <div class="card-title"><span></span> DuPont Components Over Time</div>
          <div class="chart-wrap tall">
            <canvas id="dupontTrend"></canvas>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane" id="tab-revenue">
      <div class="chart-grid cols-1">
        <div class="chart-card">
          <div class="card-title"><span></span> Revenue &amp; PAT (₹ Crore)</div>
          <div class="chart-wrap tall">
            <canvas id="revenueChart"></canvas>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── 4. DIVIDENDS & GGM ── -->
  <section class="section" id="dividends">
    <div class="section-header">
      <div class="section-title"><span class="section-num">04</span> Dividend Policy &amp; GGM Valuation</div>
      <span class="section-sub">Gordon Growth Model · Interactive Calculator</span>
    </div>

    <div class="chart-grid cols-2" style="margin-bottom:1.5rem">
      <div class="chart-card">
        <div class="card-title"><span></span> Dividend Per Share (₹) &amp; Payout Ratio</div>
        <div class="chart-wrap">
          <canvas id="dividendChart"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="card-title"><span></span> Dividend History Table</div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Year</th><th>DPS (₹)</th><th>EPS (₹)</th><th>Payout</th><th>Yield</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>FY2019</td><td>125</td><td>717</td><td>17.4%</td><td>0.4%</td></tr>
            <tr><td>FY2020</td><td>125</td><td>655</td><td>19.1%</td><td>0.5%</td></tr>
            <tr><td>FY2021</td><td>0*</td><td>714</td><td>—</td><td>—</td></tr>
            <tr><td>FY2022</td><td>21</td><td>995</td><td>2.1%</td><td>0.1%</td></tr>
            <tr><td>FY2023</td><td>36</td><td>1,215</td><td>3.0%</td><td>0.1%</td></tr>
            <tr class="highlight"><td>FY2024</td><td>51</td><td>1,469</td><td>3.5%</td><td>0.1%</td></tr>
          </tbody>
        </table>
        <p class="tooltip-note">* FY2021: No dividend — COVID-19 capital conservation. Source: Eicher Motors Annual Reports.</p>
      </div>
    </div>

    <!-- GGM CALCULATOR -->
    <div class="chart-card">
      <div class="card-title"><span></span> Gordon Growth Model — Interactive Valuation Calculator</div>
      <div class="ggm-grid">
        <div>
          <div class="input-group">
            <div class="input-label">
              Base DPS (D₀) — FY2024
              <span id="d0Val">₹51</span>
            </div>
            <input type="range" id="d0" min="30" max="100" value="51" step="1">
          </div>
          <div class="input-group">
            <div class="input-label">
              Sustainable Growth Rate (g)
              <span id="gVal">10.0%</span>
            </div>
            <input type="range" id="g" min="4" max="15" value="10" step="0.5">
          </div>
          <div class="input-group">
            <div class="input-label">
              Cost of Equity (Ke)
              <span id="keVal">11.6%</span>
            </div>
            <input type="range" id="ke" min="9" max="16" value="11.6" step="0.1">
          </div>
          <div class="input-group">
            <div class="input-label">
              Market Price (Reference)
              <span id="mktVal">₹4,800</span>
            </div>
            <input type="range" id="mktPrice" min="2000" max="7000" value="4800" step="100">
          </div>
          <div class="formula-block" style="font-size:11px; margin-top:1rem">
<span class="f-comment">// GGM Formula</span>
<span class="f-key">P₀</span> = D₁ / (Ke − g)  where  <span class="f-key">D₁</span> = D₀ × (1 + g)
<span class="f-comment">// Valid only when Ke > g</span>
          </div>
        </div>
        <div class="result-display" id="ggmResult">
          <div class="result-label">GGM Intrinsic Value (P₀)</div>
          <div class="result-value" id="ggmValue">₹3,506</div>
          <div class="result-premium" id="ggmPremium">Market at <b>₹4,800</b> trades at <b>+36.9% premium</b></div>
          <div class="result-bar-wrap">
            <div class="result-bar" id="ggmBar" style="width:60%"></div>
          </div>
          <div class="result-bar-labels">
            <span>GGM: <span id="ggmBarLow">₹3,506</span></span>
            <span>Market: <span id="ggmBarHigh">₹4,800</span></span>
          </div>
          <br>
          <div style="font-family:'DM Mono',monospace; font-size:11px; color:var(--muted); line-height:1.8">
            D₁ = <span id="d1Disp">₹56.10</span><br>
            Ke − g = <span id="spreadDisp">1.6%</span><br>
            Two-stage est. ≈ ₹4,120
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── 5. PEERS ── -->
  <section class="section" id="peers">
    <div class="section-header">
      <div class="section-title"><span class="section-num">05</span> Peer Benchmarking</div>
      <span class="section-sub">FY2024 · Eicher vs. Bajaj Auto vs. Hero MotoCorp</span>
    </div>

    <div class="peer-grid">
      <div class="peer-card featured">
        <div class="peer-name">Eicher Motors</div>
        <div class="peer-tag">NSE: EICHERMOT · Premium Segment</div>
        <div class="peer-stat"><span class="peer-stat-label">Revenue (₹ Cr)</span><span class="peer-stat-value">17,255</span></div>
        <div class="peer-stat"><span class="peer-stat-label">EBITDA Margin</span><span class="peer-stat-value best">26.0%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">PAT Margin</span><span class="peer-stat-value best">23.2%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROE</span><span class="peer-stat-value">22.7%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROCE</span><span class="peer-stat-value">38.2%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">D/E Ratio</span><span class="peer-stat-value best">0.08x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">P/E Multiple</span><span class="peer-stat-value">33.0x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">Units Sold (Mn)</span><span class="peer-stat-value">0.91</span></div>
      </div>
      <div class="peer-card">
        <div class="peer-name">Bajaj Auto</div>
        <div class="peer-tag">NSE: BAJAJ-AUTO · Mass + Export</div>
        <div class="peer-stat"><span class="peer-stat-label">Revenue (₹ Cr)</span><span class="peer-stat-value best">41,965</span></div>
        <div class="peer-stat"><span class="peer-stat-label">EBITDA Margin</span><span class="peer-stat-value">20.3%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">PAT Margin</span><span class="peer-stat-value">18.7%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROE</span><span class="peer-stat-value best">31.5%*</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROCE</span><span class="peer-stat-value best">38.8%*</span></div>
        <div class="peer-stat"><span class="peer-stat-label">D/E Ratio</span><span class="peer-stat-value best">0.00x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">P/E Multiple</span><span class="peer-stat-value">28.0x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">Units Sold (Mn)</span><span class="peer-stat-value">4.71</span></div>
      </div>
      <div class="peer-card">
        <div class="peer-name">Hero MotoCorp</div>
        <div class="peer-tag">NSE: HEROMOTOCO · Mass Commuter</div>
        <div class="peer-stat"><span class="peer-stat-label">Revenue (₹ Cr)</span><span class="peer-stat-value">37,432</span></div>
        <div class="peer-stat"><span class="peer-stat-label">EBITDA Margin</span><span class="peer-stat-value">14.8%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">PAT Margin</span><span class="peer-stat-value">11.2%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROE</span><span class="peer-stat-value">26.4%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">ROCE</span><span class="peer-stat-value">29.1%</span></div>
        <div class="peer-stat"><span class="peer-stat-label">D/E Ratio</span><span class="peer-stat-value">0.12x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">P/E Multiple</span><span class="peer-stat-value best">22.0x</span></div>
        <div class="peer-stat"><span class="peer-stat-label">Units Sold (Mn)</span><span class="peer-stat-value best">5.92</span></div>
      </div>
    </div>

    <div class="chart-grid cols-2">
      <div class="chart-card">
        <div class="card-title"><span></span> Margin Comparison (%)</div>
        <div class="chart-wrap">
          <canvas id="peerMargins"></canvas>
        </div>
      </div>
      <div class="chart-card">
        <div class="card-title"><span></span> Returns &amp; Valuation vs. Peers</div>
        <div class="chart-wrap">
          <canvas id="peerReturns"></canvas>
        </div>
      </div>
    </div>

    <p class="tooltip-note" style="margin-top:1rem">* Bajaj ROE/ROCE elevated due to buybacks and Chetak EV investment cycles. Green = best-in-class. Source: FY2024 Annual Reports.</p>
  </section>

</main>

<footer>
  <div>
    <strong style="color:var(--cream)">Eicher Motors Limited</strong> — Senior Equity Research Division
  </div>
  <div>Data: Eicher Motors Annual Reports FY2019–FY2024 · February 2026</div>
  <div style="color:var(--muted); font-size:11px">For Institutional Use Only · Not Investment Advice</div>
</footer>

<script>
// ── CHART DEFAULTS ────────────────────────────────────────────────────────────
Chart.defaults.color = '#8B9BB4';
Chart.defaults.font.family = "'DM Mono', monospace";
Chart.defaults.font.size = 11;

const GOLD   = '#C9A84C';
const GOLD2  = '#E8C97A';
const NAVY   = '#0D1B2A';
const NAVY2  = '#1A2E45';
const MUTED  = '#8B9BB4';
const GREEN  = '#58D68D';
const RED    = '#EC7063';
const BLUE   = '#5DADE2';
const CREAM  = '#F0EAD6';

const gridOpts = {
  color: 'rgba(201,168,76,0.08)',
  drawBorder: false,
};

const tickOpts = { color: MUTED, font: { size: 10 } };

const YEARS = ['FY2019','FY2020','FY2021','FY2022','FY2023','FY2024'];

// ── 1. CAPITAL STRUCTURE ──────────────────────────────────────────────────────
new Chart(document.getElementById('capitalChart'), {
  type: 'bar',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'Total Equity',
        data: [8240, 9150, 10200, 12400, 14800, 17600],
        backgroundColor: 'rgba(201,168,76,0.75)',
        borderRadius: 3,
        order: 2,
      },
      {
        label: 'Total Debt',
        data: [1420, 1290, 1180, 1350, 1380, 1350],
        backgroundColor: 'rgba(236,112,99,0.6)',
        borderRadius: 3,
        order: 2,
      },
      {
        label: 'D/E Ratio',
        data: [0.17, 0.14, 0.12, 0.11, 0.09, 0.08],
        type: 'line',
        yAxisID: 'y2',
        borderColor: BLUE,
        backgroundColor: 'transparent',
        borderWidth: 2,
        pointRadius: 4,
        pointBackgroundColor: BLUE,
        tension: 0.4,
        order: 1,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10, font: { size: 10 } } } },
    scales: {
      x: { stacked: true, grid: gridOpts, ticks: tickOpts },
      y: { stacked: true, grid: gridOpts, ticks: { ...tickOpts, callback: v => '₹' + (v/1000).toFixed(0) + 'k' } },
      y2: {
        position: 'right',
        grid: { display: false },
        ticks: { ...tickOpts, callback: v => v.toFixed(2) + 'x' },
        max: 0.3,
      }
    }
  }
});

new Chart(document.getElementById('netCashChart'), {
  type: 'bar',
  data: {
    labels: YEARS,
    datasets: [{
      label: 'Net Cash (₹ Cr)',
      data: [820, 1240, 2600, 3800, 4900, 5800],
      backgroundColor: YEARS.map(() => 'rgba(88,214,141,0.65)'),
      borderRadius: 4,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { display: false } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => '₹' + (v/1000).toFixed(1) + 'k' } }
    }
  }
});

// ── 2. WACC ───────────────────────────────────────────────────────────────────
new Chart(document.getElementById('waccBreakdown'), {
  type: 'doughnut',
  data: {
    labels: ['Equity Component (Ke × weight)', 'Debt Component (Kd × weight × (1-T))'],
    datasets: [{
      data: [11.50, 0.058],
      backgroundColor: [GOLD, 'rgba(93,173,226,0.7)'],
      borderWidth: 0,
      hoverOffset: 8,
    }]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    cutout: '70%',
    plugins: {
      legend: { labels: { color: MUTED, boxWidth: 10, font: { size: 10 } } },
      tooltip: { callbacks: { label: ctx => ' ' + ctx.label + ': ' + ctx.parsed.toFixed(3) + '%' } }
    }
  }
});

new Chart(document.getElementById('evaChart'), {
  type: 'bar',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'ROCE (%)',
        data: [31.8, 24.6, 25.1, 32.4, 36.8, 38.2],
        backgroundColor: 'rgba(88,214,141,0.7)',
        borderRadius: 3,
      },
      {
        label: 'WACC (%)',
        data: [12.1, 11.9, 11.5, 11.4, 11.5, 11.56],
        backgroundColor: 'rgba(201,168,76,0.5)',
        borderRadius: 3,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10, font: { size: 10 } } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => v + '%' } }
    }
  }
});

// ── 3. PROFITABILITY ──────────────────────────────────────────────────────────
new Chart(document.getElementById('marginChart'), {
  type: 'line',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'EBITDA Margin',
        data: [25.4, 22.0, 22.3, 24.6, 25.5, 26.0],
        borderColor: GOLD,
        backgroundColor: 'rgba(201,168,76,0.08)',
        fill: true,
        borderWidth: 2.5,
        tension: 0.4,
        pointRadius: 5,
        pointBackgroundColor: GOLD,
      },
      {
        label: 'PAT Margin',
        data: [19.9, 19.5, 21.8, 21.7, 22.9, 23.2],
        borderColor: GREEN,
        backgroundColor: 'rgba(88,214,141,0.06)',
        fill: true,
        borderWidth: 2.5,
        tension: 0.4,
        pointRadius: 5,
        pointBackgroundColor: GREEN,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: {
        grid: gridOpts,
        ticks: { ...tickOpts, callback: v => v + '%' },
        min: 10, max: 32,
      }
    }
  }
});

new Chart(document.getElementById('returnsChart'), {
  type: 'line',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'ROCE (%)',
        data: [31.8, 24.6, 25.1, 32.4, 36.8, 38.2],
        borderColor: GREEN,
        borderWidth: 2.5,
        tension: 0.4,
        pointRadius: 5,
        pointBackgroundColor: GREEN,
        fill: false,
      },
      {
        label: 'ROE (%)',
        data: [23.7, 19.5, 19.0, 21.8, 22.4, 22.7],
        borderColor: GOLD,
        borderWidth: 2.5,
        tension: 0.4,
        pointRadius: 5,
        pointBackgroundColor: GOLD,
        fill: false,
      },
      {
        label: 'WACC (%)',
        data: [12.1, 11.9, 11.5, 11.4, 11.5, 11.56],
        borderColor: RED,
        borderWidth: 1.5,
        borderDash: [6, 4],
        tension: 0.3,
        pointRadius: 3,
        pointBackgroundColor: RED,
        fill: false,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => v + '%' } }
    }
  }
});

new Chart(document.getElementById('dupontChart'), {
  type: 'bar',
  data: {
    labels: ['Net Margin', 'Asset Turnover', 'Equity Multiplier', 'ROE (Result)'],
    datasets: [{
      data: [23.2, 77, 127, 22.7],
      backgroundColor: [
        'rgba(201,168,76,0.7)',
        'rgba(93,173,226,0.7)',
        'rgba(175,122,197,0.7)',
        'rgba(88,214,141,0.9)',
      ],
      borderRadius: 4,
    }]
  },
  options: {
    indexAxis: 'y',
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { display: false } },
    scales: {
      x: { grid: gridOpts, ticks: { ...tickOpts, callback: v => v + '' } },
      y: { grid: { display: false }, ticks: tickOpts }
    }
  }
});

new Chart(document.getElementById('dupontTrend'), {
  type: 'line',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'Net Margin (%)',
        data: [19.9, 19.5, 21.8, 21.7, 22.9, 23.2],
        borderColor: GOLD, borderWidth: 2, tension: 0.4,
        pointRadius: 4, pointBackgroundColor: GOLD, fill: false,
      },
      {
        label: 'Asset Turnover (× 100)',
        data: [84, 72, 65, 78, 79, 77],
        borderColor: BLUE, borderWidth: 2, tension: 0.4,
        pointRadius: 4, pointBackgroundColor: BLUE, fill: false,
      },
      {
        label: 'Equity Multiplier (× 100)',
        data: [136, 132, 129, 128, 128, 127],
        borderColor: 'rgba(175,122,197,0.9)', borderWidth: 2, tension: 0.4,
        pointRadius: 4, pointBackgroundColor: 'rgba(175,122,197,0.9)', fill: false,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: tickOpts }
    }
  }
});

new Chart(document.getElementById('revenueChart'), {
  type: 'bar',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'Revenue (₹ Cr)',
        data: [9797, 9149, 8923, 12458, 14445, 17255],
        backgroundColor: 'rgba(201,168,76,0.55)',
        borderRadius: 3,
        yAxisID: 'y',
      },
      {
        label: 'PAT (₹ Cr)',
        data: [1952, 1784, 1943, 2708, 3310, 4001],
        backgroundColor: 'rgba(88,214,141,0.65)',
        borderRadius: 3,
        yAxisID: 'y',
      },
      {
        label: 'Revenue Growth YoY',
        data: [null, -6.6, -2.5, 39.6, 15.9, 19.4],
        type: 'line',
        yAxisID: 'y2',
        borderColor: BLUE,
        backgroundColor: 'transparent',
        borderWidth: 2,
        pointRadius: 4,
        tension: 0.4,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => '₹' + (v/1000).toFixed(0) + 'k' } },
      y2: {
        position: 'right', grid: { display: false },
        ticks: { ...tickOpts, callback: v => v + '%' },
      }
    }
  }
});

// ── 4. DIVIDENDS ──────────────────────────────────────────────────────────────
new Chart(document.getElementById('dividendChart'), {
  type: 'bar',
  data: {
    labels: YEARS,
    datasets: [
      {
        label: 'DPS (₹)',
        data: [125, 125, 0, 21, 36, 51],
        backgroundColor: 'rgba(201,168,76,0.7)',
        borderRadius: 4,
        yAxisID: 'y',
      },
      {
        label: 'Payout Ratio (%)',
        data: [17.4, 19.1, 0, 2.1, 3.0, 3.5],
        type: 'line',
        yAxisID: 'y2',
        borderColor: GREEN,
        backgroundColor: 'transparent',
        borderWidth: 2,
        pointRadius: 5,
        tension: 0.4,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => '₹' + v } },
      y2: {
        position: 'right', grid: { display: false },
        ticks: { ...tickOpts, callback: v => v + '%' }
      }
    }
  }
});

// ── 5. PEERS ──────────────────────────────────────────────────────────────────
new Chart(document.getElementById('peerMargins'), {
  type: 'bar',
  data: {
    labels: ['EBITDA Margin', 'PAT Margin'],
    datasets: [
      {
        label: 'Eicher Motors',
        data: [26.0, 23.2],
        backgroundColor: GOLD,
        borderRadius: 4,
      },
      {
        label: 'Bajaj Auto',
        data: [20.3, 18.7],
        backgroundColor: 'rgba(93,173,226,0.7)',
        borderRadius: 4,
      },
      {
        label: 'Hero MotoCorp',
        data: [14.8, 11.2],
        backgroundColor: 'rgba(175,122,197,0.7)',
        borderRadius: 4,
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      x: { grid: gridOpts, ticks: tickOpts },
      y: { grid: gridOpts, ticks: { ...tickOpts, callback: v => v + '%' }, max: 32 }
    }
  }
});

new Chart(document.getElementById('peerReturns'), {
  type: 'radar',
  data: {
    labels: ['EBITDA Margin', 'PAT Margin', 'ROE', 'ROCE', 'P/E (inv)', 'Low Leverage'],
    datasets: [
      {
        label: 'Eicher Motors',
        data: [26, 23.2, 22.7, 38.2, 67, 92],
        borderColor: GOLD,
        backgroundColor: 'rgba(201,168,76,0.1)',
        borderWidth: 2,
        pointBackgroundColor: GOLD,
      },
      {
        label: 'Bajaj Auto',
        data: [20.3, 18.7, 31.5, 38.8, 72, 100],
        borderColor: BLUE,
        backgroundColor: 'rgba(93,173,226,0.08)',
        borderWidth: 2,
        pointBackgroundColor: BLUE,
      },
      {
        label: 'Hero MotoCorp',
        data: [14.8, 11.2, 26.4, 29.1, 82, 88],
        borderColor: 'rgba(175,122,197,0.9)',
        backgroundColor: 'rgba(175,122,197,0.07)',
        borderWidth: 2,
        pointBackgroundColor: 'rgba(175,122,197,0.9)',
      }
    ]
  },
  options: {
    responsive: true, maintainAspectRatio: false,
    plugins: { legend: { labels: { color: MUTED, boxWidth: 10 } } },
    scales: {
      r: {
        grid: { color: 'rgba(201,168,76,0.1)' },
        angleLines: { color: 'rgba(201,168,76,0.1)' },
        ticks: { display: false },
        pointLabels: { color: MUTED, font: { size: 10 } }
      }
    }
  }
});

// ── GGM CALCULATOR ────────────────────────────────────────────────────────────
function updateGGM() {
  const d0  = +document.getElementById('d0').value;
  const g   = +document.getElementById('g').value / 100;
  const ke  = +document.getElementById('ke').value / 100;
  const mkt = +document.getElementById('mktPrice').value;

  document.getElementById('d0Val').textContent  = '₹' + d0;
  document.getElementById('gVal').textContent   = (g*100).toFixed(1) + '%';
  document.getElementById('keVal').textContent  = (ke*100).toFixed(1) + '%';
  document.getElementById('mktVal').textContent = '₹' + mkt.toLocaleString();

  const d1 = d0 * (1 + g);
  document.getElementById('d1Disp').textContent = '₹' + d1.toFixed(2);

  const spread = ke - g;
  document.getElementById('spreadDisp').textContent = (spread * 100).toFixed(2) + '%';

  const valEl    = document.getElementById('ggmValue');
  const premEl   = document.getElementById('ggmPremium');
  const barEl    = document.getElementById('ggmBar');
  const barLow   = document.getElementById('ggmBarLow');
  const barHigh  = document.getElementById('ggmBarHigh');

  if (spread <= 0.001) {
    valEl.textContent  = 'N/A';
    premEl.innerHTML   = 'Invalid: Ke must be > g for GGM to work';
    barEl.style.width  = '50%';
    return;
  }

  const p0 = d1 / spread;
  const premium = ((mkt - p0) / p0) * 100;
  const pct = Math.min(Math.max((p0 / (p0 + mkt)) * 100, 10), 90);

  valEl.textContent = '₹' + Math.round(p0).toLocaleString();
  barLow.textContent  = '₹' + Math.round(p0).toLocaleString();
  barHigh.textContent = '₹' + mkt.toLocaleString();

  if (Math.abs(premium) < 1) {
    premEl.innerHTML = `Market at <b>₹${mkt.toLocaleString()}</b> — fairly valued vs GGM`;
  } else if (premium > 0) {
    premEl.innerHTML = `Market at <b>₹${mkt.toLocaleString()}</b> trades at <b>+${premium.toFixed(1)}% premium</b>`;
  } else {
    premEl.innerHTML = `Market at <b>₹${mkt.toLocaleString()}</b> trades at <b>${premium.toFixed(1)}% discount</b>`;
  }

  barEl.style.width = pct + '%';
}

['d0','g','ke','mktPrice'].forEach(id => {
  document.getElementById(id).addEventListener('input', updateGGM);
});

// ── TABS ──────────────────────────────────────────────────────────────────────
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const tabId = btn.dataset.tab;
    btn.closest('.section').querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    btn.closest('.section').querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + tabId).classList.add('active');
  });
});

// ── NAV ACTIVE STATE ON SCROLL ────────────────────────────────────────────────
const sections = document.querySelectorAll('section[id]');
const navLinks  = document.querySelectorAll('.nav-links a');

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      navLinks.forEach(a => {
        a.classList.toggle('active', a.getAttribute('href') === '#' + entry.target.id);
      });
    }
  });
}, { threshold: 0.3 });

sections.forEach(s => observer.observe(s));
</script>
</body>
</html>
